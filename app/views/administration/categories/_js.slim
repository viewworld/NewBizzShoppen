javascript:
    function move_users_to_all(users_type) {
        $("#all_" + users_type + " option:selected").each(function() {
            $("#selected_" + users_type).
                    append($("<option></option>").
                    attr("value", $(this).val()).
                    text($(this).text()));
            $(this).remove();
        });
    }

    function move_users_to_selected(users_type) {
        $("#selected_" + users_type + " option:selected").each(function() {
            $("#all_" + users_type).
                    append($("<option></option>").
                    attr("value", $(this).val()).
                    text($(this).text()));
            $(this).remove();
        });
    }

    function select_all_options(users_type) {
        if ($("#selected_" + users_type + " option").length == 0) {
            $("#selected_" + users_type).append($("<option></option>"));
        }

        $("#selected_" + users_type + " option").each(function() {
            $(this).attr("selected", "selected");
        });
    }

    function select_options_onsubmit() {
        if ($('#category_is_customer_unique:checked').val() == "1") {
            select_all_options("customers")
        }
        else {
            clear_select("customers", "selected");
            select_all_options("customers")
        }

        if ($('#category_is_agent_unique:checked').val() == "1") {
            select_all_options("agents")
        }
        else {
            clear_select("agents", "selected");
            select_all_options("agents")
        }
    }

    function show_hide_users_selection(users_type) {
        if ($('#category_is_' + users_type + '_unique:checked').val() == "1") {
            $('#users_selection_' + users_type + 's_div').show();
        }
        else {
            $('#users_selection_' + users_type + 's_div').hide();
        }
    }

    function clear_select(users_type, select_type) {
        $("#" + select_type + "_" + users_type + " option").each(function() {
            $(this).remove();
        });
    }

    function add_option_to_select(users_type, select_type, name, value) {
        if ($("#selected_" + users_type + " option[value=" + value + "]").length == 0) {
            $("#" + select_type + "_" + users_type).
                    append($("<option></option>").
                    attr("value", value).
                    text(name));
        }
    }

    function filter_users(users_type) {
        query = $('#filer_' + users_type).val();
        $.ajax({
            type: "GET",
            url: "<%= administration_category_users_path -%>",
            data: "query=" + query + "&users_type=" + users_type
        });
    }
