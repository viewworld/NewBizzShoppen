<div class="pdd_10 no_pdd_t">
  <fieldset class="inputs labels_ta_r labels_240">
    <ol>
      <%= form.input :first_name %>
      <%= form.input :last_name %>
      <% if defined? form.object.address %>
          <%= form.fields_for :address do |address_form| %>
              <%= address_form.input :address_line_1 %>
              <%= address_form.input :address_line_2 %>
              <%= address_form.input :address_line_3 %>
              <%= address_form.input :zip_code %>
              <%= address_form.input :country, :as => :select, :collection => Country.all %>
          <% end %>
      <% end %>
      <% if ['lead_buyer', 'customer'].include?(params[:role]) or @user.has_any_role?(:lead_buyer, :customer) %>
        <%= form.input :vat_number %>
      <% end %>
    </ol>
  </fieldset>
</div>
<hl/>

<div class="pdd_10 no_pdd_t">
  <fieldset class="inputs labels_ta_r labels_240">
    <ol class="align_inputs">
      <%= form.input :screen_name %>
      <%= form.input :phone %>
      <%= form.input :email %>
    </ol>
  </fieldset>
</div>
<hl/>

<% if ['agent', 'call_centre'].include?(params[:role]) or @user.has_any_role?(:agent, :call_centre) %>
    <div class="pdd_10 no_pdd_t">
      <fieldset class="inputs labels_ta_r labels_240">
        <ol class="align_inputs">
          <%= form.input :payout, :hint => "%" %>
        </ol>
      </fieldset>
    </div>
    <hl/>
<% end %>

<% if ['agent'].include?(params[:role]) or @user.has_any_role?(:agent) %>
    <div class="pdd_10 no_pdd_t">
      <fieldset class="inputs labels_ta_r labels_240">
        <ol class="align_inputs">
          <%= form.input :can_edit_payout_information %>
          <%= form.input :paypal_email %>
          <%= form.input :bank_swift_number %>
          <%= form.input :bank_iban_number %>
        </ol>
      </fieldset>
    </div>
    <hl/>
<% elsif !form.object.new_record? and (['lead_buyer', 'customer'].include?(params[:role]) or @user.has_any_role?(:lead_buyer, :customer)) %>
    <div class="pdd_10 no_pdd_t">
      <fieldset class="inputs labels_ta_r labels_240">
        <ol class="align_inputs">
          <%= form.input :bank_account, :as => :select, :collection => BankAccount.all %>
        </ol>
      </fieldset>
    </div>
    <hl/>
<% end %>

<div class="pdd_10 no_pdd_t">
  <fieldset class="inputs labels_ta_r labels_240">
    <ol class="align_inputs">
      <%= form.input :agreement_read, :as => :hidden %>
      <%= form.input :newsletter_on %>
      <% if ['agent', 'call_centre'].include?(params[:role]) or @user.has_any_role?(:agent, :call_centre) %>
        <%= form.input :certification_level, :as => :select, :collection => User::CERTIFICATION_LEVELS.map { |c| [t("models.lead.certification.lvl#{c}"), c] }, :selected => @user.read_attribute(:certification_level) %>
      <% end %>
      <% if ['lead_buyer', 'customer'].include?(params[:role]) or @user.has_any_role?(:lead_buyer, :customer) %>
          <%= form.input :big_buyer, :as => :boolean %>
      <% end %>      
      <% if @user.vat_number.present? and (['lead_buyer', 'customer'].include?(params[:role]) or @user.has_any_role?(:lead_buyer, :customer)) %>
          <%= form.input :not_charge_vat, :as => :boolean, :label => t("administration.users.edit.view.not_charge_vat") %>
      <% end %>
    </ol>
  </fieldset>
</div>

<% if ['category_buyer'].include?(params[:role]) or @user.has_any_role?(:category_buyer) %>
    <hl/>
    <div class="pdd_10 no_pdd_t">
      <fieldset class="inputs labels_ta_r labels_240">
        <ol class="align_inputs">
          <%= form.input :category_id, :collection => Category.without_locked, :include_blank => false %>
        </ol>
      </fieldset>
    </div>
<% end %>
