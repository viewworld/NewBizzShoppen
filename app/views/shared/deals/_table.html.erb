<%
   cols = 5
   cols += 1 if show_checkboxes
   cols += 1 if not block_tools.nil?
-%>

<table id="leads" class="generic">
  <thead>
  <tr>
    <th class="hl"></th>
    <% if show_checkboxes %>
        <th></th>
    <% end %>
    <th><%= link_to t("shared.deals.table.creation_date"), order_for_scoped_search(:created_at) %></th>
    <th><%= link_to t("shared.deals.table.name"), order_for_scoped_search(:header) %></th>
    <th><%= link_to t("shared.deals.table.expires"), order_for_scoped_search(:end_date) %></th>
    <th><%= t("shared.deals.table.likes") %></th>
    <th><%= link_to t("shared.deals.table.published"), order_for_scoped_search(:published) %></th>
    <% if block_tools %>
        <th class="ta_r">
          <%= t("shared.deals.table.actions") %>
        </th>
    <% end %>
    <th class="hr"></th>
  </tr>
  </thead>
  <tfoot>
  <tr>
    <td class="fl"></td>
    <td colspan="<%= cols %>"></td>
    <td class="fr"></td>
  </tr>
  </tfoot>
  <tbody>
  <% collection.each do |deal| %>
      <tr id="deal_<%= deal.id %>" class="<%= cycle("odd", "even") %>">
        <td class="cl"></td>
        <% if show_checkboxes %>
            <td><%= check_box_tag("deal_ids[]", deal.id) %></td>
        <% end %>
        <td><%= deal.created_at %></td>
        <td><%= deal.header %></td>
        <td><%= deal.end_date %></td>
        <td></td>
        <td><%= deal.published %></td>
        <% if block_tools %>
            <td class="tda ta_r">
              <%= with_output_buffer { block_tools.call(deal) } %>
            </td>
        <% end %>
        <td class="cr"></td>
      </tr>
  <% end %>

  <% if will_paginate %>
      <tr class="pagination">
        <td colspan="<%= cols + 3 %>" class="ta_c">
          <%= will_paginate collection, :previous_label => '&laquo;', :next_label => '&raquo;' %>
        </td>
      </tr>
  <% end %>

  </tbody>
</table>