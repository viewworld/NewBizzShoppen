<% total_columns = 15 + CampaignReport.final_results(result_ids).count %>
<table id="reports_table" class="generic">
  <thead>
  <tr>
    <th class="hl"></th>
    <th><%= t("campaign_reports.index.table.campaign_name") %></th>
    <th colspan="<%= 4 + CampaignReport.final_results(result_ids).count %>" class="ta_r pointer"><%= t("campaign_reports.index.table.campaign_targets") %></th>
    <th colspan="5" class="ta_r pointer"><%= t("campaign_reports.index.table.completion") %></th>
    <th colspan="3" class="ta_r pointer"><%= t("campaign_reports.index.table.campaign_results") %></th>
    <th colspan="1" class="ta_r pointer"><%= t("campaign_reports.index.table.predicted_results") %></th>
    <th colspan="1" class="ta_r pointer"><%= t("campaign_reports.index.table.realised_results") %></th>
    <th class="hr"></th>
  </tr>
  </thead>
  <tfoot>
  <tr>
    <td class="fl"></td>
    <td colspan="<%= total_columns %>"></td>
    <td class="fr"></td>
  </tr>
  </tfoot>
  <tbody>
  <tr>
    <td class="cl"></td>
    <td>&nbsp;</td>
    <td><%= t("campaign_reports.index.table.success_percent") %></td>
    <td><%= t("campaign_reports.index.table.finish_cph") %></td>
    <% CampaignReport.final_results(result_ids).each do |result| %>
        <td><%= result.name %></td>
    <% end %>
    <td><%= t("campaign_reports.index.table.value_ph") %></td>

    <td><%= t("campaign_reports.index.table.number_of_contacts") %></td>
    <td><%= t("campaign_reports.index.table.percent") %></td>
    <td><%= t("campaign_reports.index.table.number_of_results_made") %></td>
    <td><%= t("campaign_reports.index.table.avr_number_of_min_per_final_result") %></td>
    <td><%= t("campaign_reports.index.table.avr_number_of_results_per_finished_contacts") %></td>
    <td><%= t("campaign_reports.index.table.number_of_results_per_minute") %></td>

    <td><%= t("campaign_reports.index.table.value_created") %></td>
    <td><%= t("campaign_reports.index.table.leads_sold") %></td>
    <td><%= t("campaign_reports.index.table.hours_used") %></td>
    <td><%= t("campaign_reports.index.table.production_cost") %></td>

    <td><%= t("campaign_reports.index.table.result_value") %></td>

    <td><%= t("campaign_reports.index.table.value_from_leads_sold") %></td>
    <td class="cr"></td>
  </tr>

  <% if per_user %>
      <% campaign_users.each do |user| %>
          <tr>
            <td class="cl"></td>
            <td colspan="<%= total_columns %>"><b><%= user.screen_name %></b></td>
            <td class="cr"></td>
          </tr>
          <%= render :partial => "callers/campaign_reports/campaigns", :locals => {:campaign_reports => campaign_reports.select { |cr| cr.user == user }, :result_ids => result_ids} %>
      <% end %>
  <% else %>
      <%= render :partial => "callers/campaign_reports/campaigns", :locals => {:campaign_reports => campaign_reports, :result_ids => result_ids} %>
  <% end %>

  </tbody>

</table>
