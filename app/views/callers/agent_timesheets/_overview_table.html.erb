  <table class="generic">
    <thead>
    <tr>
      <td><%= type.to_s %></td>
      <% overview.days_of_week.each do |dow| %>
        <td><%= dow %></td>
      <% end %>
      <td>Total <%= type.to_s %></td>
     </tr>
    </thead>
    <tbody>
    <% overview.cweeks.each do |cweek| %>
      <tr rowid="<%= "#{cweek.year}#{cweek.cweek}" %>">
        <td>Week <%= cweek.to_s %></td>
        <% overview.days_of_week.each do |dow| %>
          <td class="val">
          <% if day = results.detect{|d| d.dow == dow and d.year == cweek.year and d.week == cweek.cweek} and day.send(type).to_f > 0 %>
            <%= as_currency(day.send(type),nil,2) %>
          <% else %>
            <%= as_currency(0,nil,2) %>
          <% end %>
        <% end %>
        </td>
        <td class="total_h"></td>
      </tr>
    <% end %>
    </tbody>
  </table>

  <script type="text/javascript">
    function sum_row(row) {
        var sum = 0;
        $(row).find("td.val").each(function() {
          sum += Number($(this).html());
        });
        $(row).find("td.total_h").html(Math.round(sum*100)/100);
    }

    $(document).ready(function(){
        $('.total_h').each(function(){sum_row($(this).parent())});
    });
  </script>