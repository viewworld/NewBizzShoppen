<div class="column_left">
  <div class="pdd_10 no_pdd_t">
    <fieldset class="inputs labels_ta_r labels_200">
      <ol class="align_inputs">
        <%= form.input :company_name %>

        <%= form.input :first_name %>
        <%= form.input :last_name %>

        <% if defined? form.object.address and form.object.parent.blank? %>
            <%= form.fields_for :address do |address_form| %>
                <%= address_form.input :address_line_1 %>
                <%= address_form.input :address_line_2 %>
                <%= address_form.input :address_line_3 %>
                <%= address_form.input :zip_code %>
                <%= address_form.input :country_id, :as => :select, :collection => Country.all, :input_html => { :onchange => "refresh_regions_list('user_#{params[:role].present? ? params[:role] : form.object.role}_address_attributes');" } %>
                <%= address_form.input :region_id, :as => :select, :collection => regions_collection_for(form.object.address.country) %>
            <% end %>
        <% end %>
      </ol>
    </fieldset>
  </div>
</div>

<div class="column_left">
  <div class="pdd_10 no_pdd_t">
    <fieldset class="inputs labels_ta_r">
      <ol class="align_inputs">
        <%= form.input :screen_name %>
        <%= form.input :phone %>
        <%= form.input :email %>


        <%= form.input :agreement_read, :as => :hidden %>


        <% if @user.has_role?(:customer) or params[:user_type] == "supplier" %>
            <%= form.input :big_buyer, :as => :boolean %>
        <% end %>

        <% if @user.new_record? %>
            <%= form.input :skip_email_verification, :as => :boolean %>
            <%= form.input :send_invitation, :as => :boolean %>
        <% end %>
      </ol>
    </fieldset>
  </div>
</div>
<hl/>

<% if @user.new_record? %>
    <clb/>

    <div class="column_left">
        <div class="pdd_10 no_pdd_t">
          <fieldset class="inputs labels_ta_r labels_200">
            <ol class="align_inputs">
              <%= form.input :auto_generate_password, :as => :boolean, :onclick => "show_hide_password_fields()" %>
              <span id="password_fields">
                <%= form.inputs :password, :password_confirmation %>
              </span>
            </ol>
          </fieldset>
        </div>
    </div>
<% end %>

<clb/>

<script type="text/javascript">
  function show_hide_password_fields(){
      if($('#user_auto_generate_password').attr('checked')){
          $('input[id^=user_password]').attr('disabled', 'disabled');
          $('#password_fields').hide();
      }
      else
      {
          $('input[id^=user_password]').attr('disabled', '');
          $('#password_fields').show();
      }
  }

  show_hide_password_fields();
</script>