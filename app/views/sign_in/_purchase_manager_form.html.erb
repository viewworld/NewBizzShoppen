<%= semantic_form_for user, :url => url do |form| %>
    <frm title="#{t('member_accounts.new.view.header')}" c="no_marg">
      <param:content>
        <div>
            <%= render :partial => "shared/subscriptions/new_account", :locals => { :role => "member", :form => form} %>
        </div>
        <div class="column_left">
          <div class="pdd_10 no_pdd_t">
            <fieldset class="inputs labels_ta_r labels_200">
              <ol>
                <%= form.input :company_name, :hint => hint_for(user, :company_name) %>
                <%= form.input :first_name, :hint => hint_for(user, :first_name) %>
                <%= form.input :last_name, :hint => hint_for(user, :last_name) %>
                <%= form.fields_for :address do |address_form| %>
                    <%= address_form.input :address_line_1, :hint => hint_for(user, :address_address_line_1) %>
                    <%= address_form.input :address_line_2, :hint => hint_for(user, :address_address_line_2) %>
                    <%= address_form.input :address_line_3, :hint => hint_for(user, :address_address_line_3), :required => true %>
                    <%= address_form.input :zip_code, :hint => hint_for(user, :address_zip_code) %>
                    <%= address_form.input :country_id, :as => :select, :hint => hint_for(user, :address_country_id), :collection => Country.all, :required => true, :input_html => {:onchange => "refresh_regions_list('user_member_address_attributes');"} %>
                    <%= address_form.input :region_id, :as => :select, :hint => hint_for(user, :address_region_id), :collection => regions_collection_for(user.address.country) %>
                <% end %>
              </ol>
            </fieldset>
          </div>
        </div>

        <div class="column_right">
          <div class="pdd_10 no_pdd_t">
            <fieldset class="inputs labels_ta_r">
              <ol class="align_inputs">
                <%= form.input :screen_name, :hint => hint_for(user, :screen_name) %>
                <%= form.input :phone, :hint => hint_for(user, :phone) %>
                <%= form.input :direct_phone_number, :hint => hint_for(user, :direct_phone_number) %>
                <%= form.input :email, :hint => hint_for(user, :email) %>
                <%= form.input :password, :hint => hint_for(user, :password), :as => user.rpx_identifier.blank? ? :password : :hidden %>
                <%= form.input :password_confirmation, :hint => hint_for(user, :password_confirmation), :as => user.rpx_identifier.blank? ? :password : :hidden, :required => true %>
                <%= form.input :time_zone, :wrapper_html => {:class => "select"}, :input_html => {:style => "width: 240px"} %>
                <%= form.input :agreement_read, :as => :boolean, :hint => hint_for(user, :agreement_read), :label => "#{t("common.agree_to")} #{link_to_main_page_article('terms_conditions', {:popup => true}, {:id => 'agreement_modal_box'})}".html_safe, :required => true %>
                <%= form.input :newsletter_on, :as => :boolean, :hint => hint_for(user, :newsletter_on) %>
                <%= form.input :rpx_identifier, :as => :hidden %>
              </ol>
            </fieldset>
          </div>
        </div>

        <clb/>
      </param:content>
      <param:actions>
        <ibt c="fltri" icon="plus">
          <%= form.submit t("member_accounts.new.view.button_create_account") %>
        </ibt>
        <%= bt_link_to nil, t("shared.accounts.new_account_form.button_cancel"), root_path, :class => "bt_grey fltr" %>
      </param:actions>
    </frm>
<% end %>