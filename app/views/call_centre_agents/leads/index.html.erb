<search-box:>
  <div class="search_box">
    <h2>Search</h2>

    <div class="search_content">
      <%= form_for @search, :url => call_centre_agents_leads_path do |f| %>
          <fieldset class="inputs_vertical">
            <ol class="no_pdd">
              <li class="string">
                <%= f.label :with_keyword, t("call_centre_agent.leads.index.view.search.keyword_label") %>
                <%= f.text_field :with_keyword %>
              </li>
              <li class="boolean">
                <%= f.check_box :without_inactive, {}, "true", "false" %>
                <%= f.label :without_inactive, t("call_centre_agent.leads.index.view.search.filter_with_inactive") %>
              </li>
              <li class="boolean">
                <%= f.check_box :without_outdated, {}, "true", "false" %>
                <%= f.label :without_outdated, t("call_centre_agent.leads.index.view.search.filter_with_outdated") %>
              </li>
              <li class="commit">
                <ibt c="bt_green" icon="magnify">
                  <%= submit_tag t("call_centre_agent.leads.index.view.search_button") %>
                </ibt>
              </li>
            </ol>
          </fieldset>
      <% end %>
    </div>
  </div>
</search-box:>

<column-mc:>

  <header>
    <param:content>
      <%= t("call_centre_agent.leads.index.view.title") %>
    </param:content>

    <param:actions>
      <%= form_tag new_call_centre_agents_lead_path, :method => :get, :id => "form_new_lead" do %>
          <span style="position:absolute;top: 5px; right: 110px;">
            <%= select_tag :category_id, options_for_select(Category.without_locked.map { |c| [c.name, c.id] }) %>
          </span>
          <ul class="header_actions">
            <li class="last">
              <div class="hidden">
                <%= submit_tag "New" %>
              </div>
              <%= bt_link_to :plus, t("call_centre_agent.leads.index.view.new_lead"), "javascript:void", :onclick => "$('#form_new_lead').submit()" %>
            </li>
          </ul>
      <% end %>
    </param:actions>
  </header>

  <%= leads_table @leads, :show_checkboxes => false do |blocks| %>
      <% blocks.tools do |lead| %>
            <ul-actions>
              <li>
                <%= link_to t("call_centre_agent.leads.index.view.edit"), edit_call_centre_agents_lead_path(lead), :class => "default_action" %>
              </li>
              <li>
                <%= link_to t("call_centre_agent.leads.index.view.destroy"), call_centre_agents_lead_path(lead), :confirm => t("call_centre_agent.leads.index.view.destroy_confirmation"), :method => :delete %>
              </li>
            </ul-actions>
      <% end %>
      <% blocks.status_column do |lead| %>
          <% if current_user.can_publish_leads? %>
            <%= form_for [:call_centre_agents, lead], :method => :put do |f| %>
                <%= f.select :published, [[t("call_centre_agent.leads.index.view.option_published"), 1], [t("call_centre_agent.leads.index.view.option_not_published"), 0]], {:selected => lead.published ? 1 : 0}, {:onchange => "jQuery(this.form).callRemote()"} %>
            <% end %>
          <% else %>
              <%= lead.published ? t("call_centre_agent.leads.index.view.option_published") : t("call_centre_agent.leads.index.view.option_not_published") %>
          <% end %>
      <% end %>
  <% end %>

</column-mc:>